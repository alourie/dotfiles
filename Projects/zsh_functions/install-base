# vim:ft=zsh

function install_arch() {
    # Deps list, it's for arch; will need some update for debians/fedoras
    APPS="dunst polybar redshift feh network-manager-applet pasystray kitty neovim curl unzip tar starship rustup"
    for app in ${(@s/ /)APPS}; do
        if ! command -v $app > /dev/null; then
            # Not installed, just do all
            $sudo pacman -S --needed ${(@s/ /)APPS}
            break
        fi
    done

    # Install Paru
    if ! command -v paru > /dev/null; then
        cd $HOME/Projects

        rustup self upgrade-data
        rustup install stable
        rustup default stable

        sudo pacman -S --needed base-devel
        git clone https://aur.archlinux.org/paru.git
        cd paru
        makepkg -si
    fi

    #  currently I'm using JetBrains Mono, so expect it to be installed
    paru -y nerd-fonts-jetbrains-mono

}

function install_debian() {

}

function install_fedora() {

}

function install_alpine() {
    APPS="zsh bash neovim curl unzip tar starship file"
    for app in "${(@s/ /)APPS}"; do
        if ! command -v $app > /dev/null; then
            # Not installed, just do all
            $sudo apk add ${(@s/ /)APPS}
            break
        fi
    done
}

# What OS are we running?
if command -v sudo > /dev/null; then
    sudo="sudo"
fi

if command -v apt > /dev/null; then
    install_debian
elif command -v apk > /dev/null; then
    install_alpine
elif command -v dnf > /dev/null; then
    install_fedora
elif command -v pacman > /dev/null; then
    install_arch
fi

